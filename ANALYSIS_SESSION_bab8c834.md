# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º —Å–µ—Å—Å–∏–∏ bab8c834 (12.02.2026)

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

**–ö–æ–º–ø–∞–Ω–∏—è:** –î—Ä—É–∂–æ–∫ (–≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞)
**–°–µ—Å—Å–∏—è:** bab8c834
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~6 –º–∏–Ω—É—Ç (354 —Å–µ–∫—É–Ω–¥—ã)
**–°–æ–æ–±—â–µ–Ω–∏–π:** 43
**Completion rate:** 1% (!)
**–°—Ç–∞—Ç—É—Å:** reviewing

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–ê–ì–ï–ù–¢ –ù–ï –í–ò–î–ò–¢ –î–ê–ù–ù–´–ï, –í–í–ï–î–ï–ù–ù–´–ï –í–†–£–ß–ù–£–Æ –í –§–û–†–ú–£**

#### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –í–†–£–ß–ù–£–Æ –≤–≤–µ–ª –≤ —Ñ–æ—Ä–º—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ:
  - `contact_name`: "–ø–æ–¥–∞—Ä–æ–∫"
  - `contact_role`: "–ø–∞—Ü–∞–Ω"
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –ë–î (–≤–∏–¥–Ω—ã –≤ `anketa_data`)
- –ù–û –∞–≥–µ–Ω—Ç —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ù–ï –í–ò–î–ò–¢ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã

#### –î–∏–∞–ª–æ–≥ –∏–∑ –ª–æ–≥–∞:
```
[User]:  "–Ø –Ω–∞–ø–∏—Å–∞–ª –ø–æ–¥–∞—Ä–æ–∫. –ü—Ä–æ—á–∏—Ç–∞–π."
[Agent]: "–ò–∑–≤–∏–Ω–∏—Ç–µ –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞. –î–∞–≤–∞–π—Ç–µ —è —É—Ç–æ—á–Ω—é —É –∫–æ–ª–ª–µ–≥..."

[User]:  "–í–µ—Ä–Ω–æ, –Ω–æ —Ç–æ–ª—å–∫–æ —Ç—Ä–µ—Ç–∏–π –ø—É–Ω–∫—Ç –≤ –∞–Ω–∫–µ—Ç–µ, –≤ –ø–µ—Ä–≤–æ–º —Ä–∞–∑–¥–µ–ª–µ –æ –∫–æ–º–ø–∞–Ω–∏–∏ ¬´–î–æ–ª–∂–Ω–æ—Å—Ç—å¬ª."
[Agent]: "–ò–∑–≤–∏–Ω–∏—Ç–µ –∑–∞ –ø—É—Ç–∞–Ω–∏—Ü—É. –£—Ç–æ—á–Ω—è—é: —Ç—Ä–µ—Ç–∏–π –ø—É–Ω–∫—Ç –∞–Ω–∫–µ—Ç—ã ‚Äî –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞."

[User]:  "–Ø —Ç–µ–±–µ –ø—Ä–æ—Å–∏–ª, —á—Ç–æ–±—ã —Ç—ã —É—Ç–æ—á–Ω–∏–ª–∞ –∏–º—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞.
          –°–∫–∞–∑–∞–ª, —á—Ç–æ —è —Å–∞–º –Ω–∞–ø–∏—Å–∞–ª"
[Agent]: "–ü—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è, —á—Ç–æ –Ω–µ –≤–µ—Ä–Ω—É–ª—Å—è –∫ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É.
          –î–∞–≤–∞–π—Ç–µ —É—Ç–æ—á–Ω–∏–º –∏–º—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞..."

[User]:  "–ö–∞–∫ —Ç–∞–º –Ω–∞–ø–∏—Å–∞–Ω–æ?"
[Agent]: "–ü—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è –∑–∞ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏–µ. –Ø —É—Ç–æ—á–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —É –∫–æ–ª–ª–µ–≥..."
```

#### –ü—Ä–∏—á–∏–Ω–∞ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è):

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
```
Frontend (—Ñ–æ—Ä–º–∞) ‚Üí PUT /api/session/{id}/anketa ‚Üí SessionManager.update_anketa() ‚Üí SQLite
                                                         ‚Üì
                                                    –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∞ ‚úì

Agent ‚Üí format_anketa_for_voice(db_session.anketa_data) ‚Üí —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î
                                    ‚Üë
                        –ù–û –¢–û–õ–¨–ö–û –í –ú–û–ú–ï–ù–¢–´:
                        - –°—Ç–∞—Ä—Ç —Å–µ—Å—Å–∏–∏ (_build_resume_context)
                        - –ü–æ—Å–ª–µ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ DeepSeek (_extract_and_update_anketa)
                        - –ü–µ—Ä–µ—Ö–æ–¥ –≤ REVIEW phase
```

**–ü–†–û–ë–õ–ï–ú–ê:** –ê–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç `anketa_data` —Ç–æ–ª—å–∫–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏), –∞ –ù–ï –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É –º–µ–∂–¥—É —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏ (–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö 21-25), –∞–≥–µ–Ω—Ç —É–∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–∏ 26 (—Å–ª–µ–¥—É—é—â–∞—è —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è).

---

### 2. **–ê–ì–ï–ù–¢ –ü–ï–†–ï–®–ï–õ –í "–ü–†–û–í–ï–†–ö–£ –ê–ù–ö–ï–¢–´" –ü–†–ï–ñ–î–ï–í–†–ï–ú–ï–ù–ù–û**

#### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:
- –ù–∞ **—Å–æ–æ–±—â–µ–Ω–∏–∏ #19** –∞–≥–µ–Ω—Ç —Å–∫–∞–∑–∞–ª: "–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –∞–Ω–∫–µ—Ç—ã. –ü–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî –î..."
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–¥–æ–∂–¥–∏, —Ç—ã –º–Ω–µ –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∞ –µ—â–µ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å!"

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä REVIEW phase:
```python
# consultant.py:647-649
if rate >= 0.6 and msg_count >= 16:
    consultation.review_started = True
```

**–ù–û:** completion_rate = 1% (0.01), –∞ –Ω–µ 60%!

–ó–Ω–∞—á–∏—Ç, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä **–ù–ï —Å—Ä–∞–±–æ—Ç–∞–ª**. –ê–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∏–ª –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –ø—Ä–æ–º–ø—Ç–µ.

#### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ –ø—Ä–æ–º–ø—Ç–∞ (consultant.yaml:252-268):
```yaml
4. –ü–†–û–í–ï–†–ö–ê –ê–ù–ö–ï–¢–´: –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–Ω–∫–µ—Ç—ã –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ —Å–æ–±—Ä–∞–ª
   –í–°–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï (–ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ, –ø–æ–∫–∞ –Ω–µ —Å–æ–±—Ä–∞–ª):
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—Ä–µ–Ω–¥/–Ω–∞–∑–≤–∞–Ω–∏–µ) ‚úì
- –û—Ç—Ä–∞—Å–ª—å –∏–ª–∏ —Å—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚úì
- –ß–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∫–æ–º–ø–∞–Ω–∏—è (—Ö–æ—Ç—è –±—ã 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) ‚úì
- –ö–∞–∫–∏–µ —É—Å–ª—É–≥–∏/–ø—Ä–æ–¥—É–∫—Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç (—Ö–æ—Ç—è –±—ã 1) ‚úì
- –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –±–æ–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Ö–æ—Ç—è –±—ã 1) ‚úó
- –ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å (—Ö–æ—Ç—è –±—ã 1) ‚úó
```

**–ü–†–û–ë–õ–ï–ú–ê:** –ê–≥–µ–Ω—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–ª "–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ" —Å–ª–∏—à–∫–æ–º —Å–≤–æ–±–æ–¥–Ω–æ –∏ –ø–µ—Ä–µ—à–µ–ª –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ, –Ω–µ —Å–æ–±—Ä–∞–≤ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏.

---

### 3. **–ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ü–û–õ–ï–ô –ê–ù–ö–ï–¢–´ –í –ì–û–õ–û–°–û–í–û–ô –ü–†–û–í–ï–†–ö–ï**

#### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:
```
[Agent]: "–ü–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî –î—Ä—É–∂–æ–∫"
[Agent]: "–í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç: —Å—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∏—è"
[User]:  "–í–µ—Ä–Ω–æ. –¢–æ–ª—å–∫–æ —è –Ω–µ –ø–æ–Ω—è–ª –Ω–∞—Å—á–µ—Ç –≤—Ç–æ—Ä–æ–≥–æ –ø—É–Ω–∫—Ç–∞.
          –£ –º–µ–Ω—è —Ç–∞–º –µ—Å—Ç—å –≤ –≤—Ç–æ—Ä–æ–º –ø—É–Ω–∫—Ç–µ [...]"
[Agent]: "–ò–∑–≤–∏–Ω–∏—Ç–µ –∑–∞ –æ—à–∏–±–∫—É. –î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –∞–Ω–∫–µ—Ç–µ.
          –í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç: –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ."
```

#### –§—É–Ω–∫—Ü–∏—è format_anketa_for_voice():
```python
# consultant.py:268-277
sections = [
    ("–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏", anketa_data.get("company_name")),       # 1
    ("–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ", anketa_data.get("contact_name")),         # 2
    ("–°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏", anketa_data.get("industry")),          # 3
    ("–£—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏", anketa_data.get("services")),             # 4
    ...
]
```

**–ü–†–û–ë–õ–ï–ú–ê:** –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ `format_anketa_for_voice()` –ù–ï –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –Ω–∞ —Ñ–æ—Ä–º–µ!

–§—Ä–æ–Ω—Ç–µ–Ω–¥ (index.html) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
```
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
2. –û—Ç—Ä–∞—Å–ª—å (industry)
3. –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ
4. –î–æ–ª–∂–Ω–æ—Å—Ç—å (contact_role)
5. ...
```

–ê–≥–µ–Ω—Ç –æ–∑–≤—É—á–∏–≤–∞–µ—Ç:
```
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
2. –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ
3. –°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (industry)
4. –£—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏
5. ...
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∏ –≤–∏–¥–∏—Ç –î–†–£–ì–û–ô –ø–æ—Ä—è–¥–æ–∫!

---

### 4. **COMPLETION RATE –ó–ê–°–¢–†–Ø–õ –ù–ê 1%**

#### –î–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–≥–æ–≤:
- –°–æ–æ–±—â–µ–Ω–∏–µ #20: `completion_rate=1%`
- –°–æ–æ–±—â–µ–Ω–∏–µ #28: `completion_rate=1%`
- –°–æ–æ–±—â–µ–Ω–∏–µ #36: `completion_rate=1%`
- –°–æ–æ–±—â–µ–Ω–∏–µ #43: `completion_rate=1%`

#### –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è:
```json
{
  "company_name": "–î—Ä—É–∂–æ–∫",                    ‚úì
  "contact_name": "–ø–æ–¥–∞—Ä–æ–∫",                   ‚úì
  "contact_role": "–ø–∞—Ü–∞–Ω",                     ‚úì
  "industry": "–≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∏—è",                   ‚úì
  "specialization": "–ª–µ—á–µ–Ω–∏–µ —Å–æ–±–∞–∫ –∏ –∫–æ—à–µ–∫",   ‚úì
  "company_description": "–ª–µ—á–∏—Ç —Å–æ–±–∞–∫ –∏ –∫–æ—à–µ–∫",‚úì
  "services": ["–ª–µ—á–µ–Ω–∏–µ —Å–æ–±–∞–∫", "–ª–µ—á–µ–Ω–∏–µ –∫–æ—à–µ–∫"],‚úì
  "agent_tasks": [5 –∑–∞–¥–∞—á],                    ‚úì
  "integrations": ["Google –ö–∞–ª–µ–Ω–¥–∞—Ä—å"]         ‚úì
}
```

**–≠—Ç–æ ~30-40% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏, –∞ –Ω–µ 1%!**

#### –ü—Ä–∏—á–∏–Ω–∞:
–ú–µ—Ç–æ–¥ `completion_rate()` –≤ `FinalAnketa` —Å—á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è** –∏ **–≤–µ—Å–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã**, –ù–û:
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –±–∞–≥ –≤ –ø–æ–¥—Å—á–µ—Ç–µ
- –ò–ª–∏ DeepSeek –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ò–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ–¥—Å—á–µ—Ç–µ

**–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ `completion_rate()`.**

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### 1. **–ö–†–ò–¢–ò–ß–ù–û: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã —Å –∞–≥–µ–Ω—Ç–æ–º**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤—Ä—É—á–Ω—É—é –≤ —Ñ–æ—Ä–º—É.

**–†–µ—à–µ–Ω–∏–µ –ê (–ø—Ä–æ—Å—Ç–æ–µ):** –ü—Ä–∏ –∫–∞–∂–¥–æ–º `PUT /api/session/{id}/anketa` –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—ã—Ç–∏–µ –∞–≥–µ–Ω—Ç—É —á–µ—Ä–µ–∑ room metadata:
```python
# server.py:update_anketa()
@app.put("/api/session/{session_id}/anketa")
async def update_anketa(session_id: str, req: UpdateAnketaRequest):
    session_mgr.update_anketa(session_id, req.anketa_data, req.anketa_md)

    # –ù–û–í–û–ï: —Å–∏–≥–Ω–∞–ª –∞–≥–µ–Ω—Ç—É –æ —Ä—É—á–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∞–Ω–∫–µ—Ç—ã
    room = await livekit_api.get_room(session.room_name)
    if room:
        metadata = {"anketa_updated_by_user": True, "timestamp": time.time()}
        await livekit_api.update_room_metadata(room.name, json.dumps(metadata))

    return {"status": "ok"}
```

**–†–µ—à–µ–Ω–∏–µ –ë (—Å–ª–æ–∂–Ω–æ–µ):** –ê–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç `anketa_data` –∏–∑ –ë–î **–ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º**:
```python
# consultant.py: –≤ event handler on_user_input_transcribed
async def on_user_input_transcribed(transcript):
    # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–Ω–∫–µ—Ç—ã –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
    session = _session_mgr.get_session(session_id)
    if session.anketa_data:
        current_anketa = format_anketa_for_voice(session.anketa_data)
        # inject –≤ context –∏–ª–∏ instructions
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É)

---

### 2. **–í–ê–ñ–ù–û: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** `format_anketa_for_voice()` –æ–∑–≤—É—á–∏–≤–∞–µ—Ç –ø–æ–ª—è –≤ –ø–æ—Ä—è–¥–∫–µ, –æ—Ç–ª–∏—á–Ω–æ–º –æ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# consultant.py:266-277
def format_anketa_for_voice(anketa_data: dict) -> str:
    """Format anketa data as readable text for voice review."""
    sections = [
        ("–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏", anketa_data.get("company_name")),
        ("–û—Ç—Ä–∞—Å–ª—å", anketa_data.get("industry")),              # MOVED UP
        ("–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è", anketa_data.get("specialization")),
        ("–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ", anketa_data.get("contact_name")), # MOVED DOWN
        ("–î–æ–ª–∂–Ω–æ—Å—Ç—å", anketa_data.get("contact_role")),
        ("–¢–µ–ª–µ—Ñ–æ–Ω", anketa_data.get("phone")),
        ("Email", anketa_data.get("email")),
        ("–°–∞–π—Ç", anketa_data.get("website")),
        ("–£—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏", anketa_data.get("services")),
        ("–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã", anketa_data.get("current_problems")),
        ("–ó–∞–¥–∞—á–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞", anketa_data.get("agent_tasks")),
        ("–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏", anketa_data.get("integrations")),
        ("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏", anketa_data.get("additional_notes")),
    ]
```

**–¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ —Ñ–æ—Ä–º–µ (index.html)**, —á—Ç–æ–±—ã –æ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —ç—Ç–æ–º—É —Å–ø–∏—Å–∫—É.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–´–°–û–ö–ò–ô (UX, –ø—É—Ç–∞–Ω–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

### 3. **–í–ê–ñ–ù–û: –£—Å–∏–ª–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ REVIEW**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≥–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–Ω–∫–µ—Ç—ã —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ (–Ω–µ —Å–æ–±—Ä–∞–≤ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏).

**–†–µ—à–µ–Ω–∏–µ –ê (–∫–æ–¥):** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π:
```python
# consultant.py:645-666
MIN_REQUIRED_FIELDS = {
    "company_name",
    "industry",
    "services",           # —Ö–æ—Ç—è –±—ã 1
    "current_problems",   # —Ö–æ—Ç—è –±—ã 1
    "agent_tasks",        # —Ö–æ—Ç—è –±—ã 1
}

def has_required_fields(anketa_data: dict) -> bool:
    """Check if all required fields are filled."""
    for field in MIN_REQUIRED_FIELDS:
        value = anketa_data.get(field)
        if not value:
            return False
        if isinstance(value, list) and len(value) == 0:
            return False
    return True

# –í –∫–æ–¥–µ:
if (rate >= 0.6 and msg_count >= 16 and has_required_fields(anketa_data)):
    consultation.review_started = True
```

**–†–µ—à–µ–Ω–∏–µ –ë (–ø—Ä–æ–º–ø—Ç):** –£—Å–∏–ª–∏—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É –≤ `consultant.yaml:252-264`:
```yaml
4. –ü–†–û–í–ï–†–ö–ê –ê–ù–ö–ï–¢–´: –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–Ω–∫–µ—Ç—ã –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ —Å–æ–±—Ä–∞–ª
   –í–°–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –û–î–ù–û –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî
   –ü–†–û–î–û–õ–ñ–ê–ô –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï (–≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã):
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- –û—Ç—Ä–∞—Å–ª—å ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- –ß–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∫–æ–º–ø–∞–Ω–∏—è ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- –£—Å–ª—É–≥–∏/–ø—Ä–æ–¥—É–∫—Ç—ã (–º–∏–Ω–∏–º—É–º 1) ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–º–∏–Ω–∏–º—É–º 1) ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
- –ó–∞–¥–∞—á–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–º–∏–Ω–∏–º—É–º 1) ‚úì –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û

–í–ê–ñ–ù–û: –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–∫–ª–æ–Ω—è–µ—Ç—Å—è –æ—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏–ª–∏ –∑–∞–¥–∞—á–∞—Ö,
–ø–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å 2-3 —Ä–∞–∑–∞, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–∞–ª—å—à–µ.
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–´–°–û–ö–ò–ô (–ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

### 4. **–°–†–ï–î–ù–ï: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥—Å—á–µ—Ç completion_rate**

**–ü—Ä–æ–±–ª–µ–º–∞:** completion_rate –∑–∞—Å—Ç—Ä—è–ª –Ω–∞ 1% –ø—Ä–∏ ~40% —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `FinalAnketa.completion_rate()`:
```python
# anketa/schema.py
def completion_rate(self) -> float:
    """Calculate the percentage of filled USER-collected fields."""
    score = 0.0
    total = 0.0

    # DEBUG: log –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
    from src.utils.logging import anketa_log
    filled_fields = []
    empty_fields = []

    for field in USER_COLLECTED_FIELDS:
        value = getattr(self, field, None)
        total += 1.0
        if value:
            if isinstance(value, list) and len(value) > 0:
                score += 1.0
                filled_fields.append(field)
            elif isinstance(value, str) and value.strip():
                score += 1.0
                filled_fields.append(field)
        else:
            empty_fields.append(field)

    rate = score / total if total > 0 else 0.0

    anketa_log.debug("completion_rate_calculated",
                     rate=rate,
                     filled=filled_fields,
                     empty=empty_fields)

    return rate
```

–ó–∞—Ç–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∏ –Ω–∞–π—Ç–∏, –ø–æ—á–µ–º—É score = 0.01.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°–†–ï–î–ù–ò–ô (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ UX –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∫—É)

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–ï–°–°–ò–ò

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| Session ID | bab8c834 |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 354 —Å–µ–∫ (~6 –º–∏–Ω) |
| –°–æ–æ–±—â–µ–Ω–∏–π | 43 |
| Completion rate | 1% |
| Review started | msg #19 |
| –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ–π | ~9-10 / ~30 (‚âà30-40%) |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–π | 11 (–∫–∞–∂–¥—ã–µ 4 —Å–æ–æ–±—â–µ–Ω–∏—è) |
| –ñ–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | 5+ |

---

## üéØ –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

1. **üî¥ –ö–†–ò–¢–ò–ß–ù–û** ‚Äî –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã —Å –∞–≥–µ–Ω—Ç–æ–º (–ø—Ä–æ–±–ª–µ–º–∞ #1)
2. **üü° –í–´–°–û–ö–ò–ô** ‚Äî –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ (–ø—Ä–æ–±–ª–µ–º–∞ #3)
3. **üü° –í–´–°–û–ö–ò–ô** ‚Äî –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ REVIEW (–ø—Ä–æ–±–ª–µ–º–∞ #2)
4. **üü¢ –°–†–ï–î–ù–ò–ô** ‚Äî –ü–æ–¥—Å—á–µ—Ç completion_rate (–ø—Ä–æ–±–ª–µ–º–∞ #4)

---

## üìù –í–´–í–û–î–´

–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî **–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ñ–æ—Ä–º–æ–π (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) –∏ –∞–≥–µ–Ω—Ç–æ–º (–±—ç–∫–µ–Ω–¥)**.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É ‚Üí –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î ‚Üí –ù–û –∞–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –ë–î —Ç–æ–ª—å–∫–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π), –ø–æ—ç—Ç–æ–º—É –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π UX-–±–∞–≥:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∞ –∞–≥–µ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —Ç–µ –∂–µ –≤–æ–ø—Ä–æ—Å—ã.

**–†–µ—à–µ–Ω–∏–µ:** –õ–∏–±–æ –∞–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –ë–î –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º, –ª–∏–±–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª –∞–≥–µ–Ω—Ç—É —á–µ—Ä–µ–∑ LiveKit metadata –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã.

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-02-12
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** Claude Sonnet 4.5
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** v6.2 (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π header)
