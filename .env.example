# ===================================
# Hanc.AI Voice Consultant — Configuration
# ===================================
# Три режима работы:
#   1. Голосовой (Voice):     LiveKit + Azure OpenAI + DeepSeek
#   2. Текстовый (Consultant): DeepSeek only
#   3. Текстовый (Maximum):    DeepSeek + Redis + PostgreSQL
#
# Запуск:
#   Голосовой:   make voice (или см. ниже)
#   Consultant:  python scripts/consultant_demo.py
#   Maximum:     python scripts/demo.py
# ===================================

# ============================================================
# DeepSeek API (ОБЯЗАТЕЛЬНО для всех режимов)
# ============================================================
# Получите ключ: https://platform.deepseek.com → API Keys
DEEPSEEK_API_KEY=sk-4bfbddcdca344e05acac5979659693d1
DEEPSEEK_API_ENDPOINT=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-reasoner

# ============================================================
# Azure OpenAI (ОБЯЗАТЕЛЬНО для голосового режима)
# ============================================================
# Получите ключ: Azure Portal → Azure OpenAI → Keys and Endpoint
# Deployment создаётся в Azure AI Studio (модель gpt-4o-realtime-preview)
AZURE_OPENAI_API_KEY=3kjE8h5Bta4ufdMPo6np8cwBHArz5nawrPmtSn4P4c0lJtKvGTGyJQQJ99BFACfhMk5XJ3w3AAAAACOGEPSz
AZURE_OPENAI_ENDPOINT=https://fh-agent-dev-swedencentral.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o-realtime-preview-dev-gs-swedencentral

# API-версия для обычных запросов (chat completions)
AZURE_OPENAI_API_VERSION=2024-12-17

# API-версия для Realtime WebSocket API (голосовой агент, STT/TTS)
# ВАЖНО: Realtime API на многих Azure эндпоинтах работает ТОЛЬКО с preview-версией.
# Если агент подключается, но молчит (404 в логах) — используйте 2024-10-01-preview.
# Проверяется: wss://<endpoint>/openai/realtime?api-version=<эта версия>
AZURE_OPENAI_REALTIME_API_VERSION=2024-10-01-preview

# ============================================================
# LiveKit (ОБЯЗАТЕЛЬНО для голосового режима)
# ============================================================
# Регистрация: https://cloud.livekit.io
# API Key и Secret: Settings → Keys в LiveKit Cloud Dashboard
# URL: ws(s)://<ваш-проект>.livekit.cloud
LIVEKIT_API_KEY=APIP9VnWNcSVPgJ
LIVEKIT_API_SECRET=h0jPqgDNf1D8QlJZeNs59suOZBzgNKtqj0oFhDHY6e0B
LIVEKIT_URL=wss://hancai-demo-jv845uy1.livekit.cloud

# ============================================================
# Redis (ОБЯЗАТЕЛЬНО для Maximum режима)
# ============================================================
# Кэш активных сессий (TTL 2 часа)
# Запуск: docker compose -f config/docker-compose.yml up -d
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SESSION_TTL=7200

# ============================================================
# PostgreSQL (ОБЯЗАТЕЛЬНО для Maximum режима)
# ============================================================
# Постоянное хранение анкет
# Запуск: docker compose -f config/docker-compose.yml up -d
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=voice_interviewer
POSTGRES_USER=interviewer_user
POSTGRES_PASSWORD=secure_password_123
# Connection strings (используются тестами и некоторыми модулями)
DATABASE_URL=postgresql://interviewer_user:secure_password_123@localhost:5432/voice_interviewer
REDIS_URL=redis://localhost:6379

# ============================================================
# Общие настройки
# ============================================================
ENVIRONMENT=development  # development | production
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR

# Настройки агента
MAX_CLARIFICATIONS_PER_QUESTION=3
MIN_ANSWER_LENGTH_WORDS=15

# ============================================================
# Инструкции по получению ключей
# ============================================================
#
# 1. DeepSeek (нужен ВСЕМ режимам):
#    - Зарегистрируйтесь: https://platform.deepseek.com
#    - В разделе API Keys создайте новый ключ
#    - Скопируйте ключ в DEEPSEEK_API_KEY
#
# 2. Azure OpenAI (нужен только для голосового режима):
#    - Зарегистрируйтесь: https://portal.azure.com
#    - Создайте ресурс Azure OpenAI
#    - В разделе "Keys and Endpoint" найдите ключ и endpoint
#    - В Azure AI Studio создайте deployment модели gpt-4o-realtime-preview
#    - AZURE_OPENAI_API_VERSION — для chat completions (2024-12-17)
#    - AZURE_OPENAI_REALTIME_API_VERSION — для WebSocket Realtime API
#      (на многих эндпоинтах работает только 2024-10-01-preview)
#
# 3. LiveKit (нужен только для голосового режима):
#    - Зарегистрируйтесь: https://cloud.livekit.io
#    - Settings → Keys → создайте API Key
#
# 4. Redis и PostgreSQL (нужны только для Maximum режима):
#    - Запускаются через: docker compose -f config/docker-compose.yml up -d
#    - Или установите локально и обновите настройки выше
#
# ============================================================
# Запуск по режимам
# ============================================================
#
# Текстовый (Consultant):
#   python scripts/consultant_demo.py
#
# Текстовый (Maximum):
#   docker compose -f config/docker-compose.yml up -d
#   python scripts/demo.py
#
# Голосовой:
#   Терминал 1: ./venv/bin/python -m uvicorn src.web.server:app --host 0.0.0.0 --port 8000
#   Терминал 2: ./venv/bin/python scripts/run_voice_agent.py dev
#   Браузер:    http://localhost:8000
#
# Логи: logs/ (10 файлов по направлениям, см. docs/LOGGING.md)
