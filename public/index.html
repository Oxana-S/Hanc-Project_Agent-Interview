<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanc.AI | –ì–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</title>
    <script src="https://unpkg.com/livekit-client@2.9.3/dist/livekit-client.umd.js"></script>
    <link rel="stylesheet" href="/styles.css?v=4.7">
</head>
<body>
    <div id="app">
        <!-- Header / Navigation -->
        <header class="header">
            <a href="/" class="logo" id="logo-link">Hanc.AI</a>
            <button id="new-session-btn" class="btn btn-primary btn-new-session">+ –ù–æ–≤–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</button>
        </header>

        <!-- Main Content -->
        <main class="main-content">

            <!-- ========== DASHBOARD SCREEN ========== -->
            <div id="dashboard-screen" class="screen">
                <!-- Filters + Bulk Actions -->
                <div class="dashboard-filters">
                    <div class="filter-tabs" id="filter-tabs">
                        <button class="filter-tab active" data-status="">–í—Å–µ</button>
                        <button class="filter-tab" data-status="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        <button class="filter-tab" data-status="paused">–ù–∞ –ø–∞—É–∑–µ</button>
                        <button class="filter-tab" data-status="confirmed">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</button>
                    </div>
                    <button id="delete-selected-btn" class="btn btn-danger" style="display:none">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
                </div>

                <!-- Voice Settings -->
                <div class="voice-settings" id="voice-settings">
                    <label for="silence-slider">–ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞: <span id="silence-value">2.0</span> —Å–µ–∫</label>
                    <input type="range" id="silence-slider" min="500" max="4000" step="250" value="2000">
                    <label for="speed-slider">–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏: <span id="speed-value">1.0</span>x</label>
                    <input type="range" id="speed-slider" min="75" max="200" step="25" value="100">
                </div>

                <!-- Sessions Table -->
                <div class="sessions-table-wrap">
                    <table class="sessions-table" id="sessions-table">
                        <thead>
                            <tr>
                                <th class="th-checkbox"><input type="checkbox" id="select-all-sessions"></th>
                                <th>ID</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                                <th>–ö–æ–Ω—Ç–∞–∫—Ç</th>
                                <th>–î–æ–∫.</th>
                                <th>–ö–æ–º–Ω–∞—Ç–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="sessions-tbody">
                            <!-- Rows rendered by JS -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty State -->
                <div id="dashboard-empty" class="dashboard-empty" style="display:none">
                    <div class="empty-icon">üé§</div>
                    <h3>–ù–µ—Ç —Å–µ—Å—Å–∏–π</h3>
                    <p>–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—É—é –≥–æ–ª–æ—Å–æ–≤—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</p>
                </div>
            </div>

            <!-- ========== INTERVIEW SCREEN ========== -->
            <div id="interview-screen" class="screen">
                <!-- Session Header -->
                <div class="session-header">
                    <button id="back-to-dashboard" class="btn-back" type="button">‚Üê –ù–∞–∑–∞–¥</button>
                    <div class="session-meta">
                        <span class="session-company" id="session-company">–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è</span>
                        <span class="anketa-status-badge" id="anketa-status-badge">–∞–∫—Ç–∏–≤–Ω–∞</span>
                    </div>
                    <div class="session-meta-right">
                        <div class="status-indicator" id="connection-status">
                            <span class="dot"></span>
                            <span class="text">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
                        </div>
                    </div>
                </div>

                <!-- Progress -->
                <div class="progress-section">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progress-text">0% –∑–∞–ø–æ–ª–Ω–µ–Ω–æ</div>
                </div>

                <!-- Status ticker -->
                <div class="status-ticker" id="status-ticker">
                    <span class="status-ticker-dot"></span>
                    <span class="status-ticker-text" id="status-ticker-text">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞—Å—å</span>
                </div>

                <!-- Two-column layout -->
                <div class="interview-columns">
                    <!-- LEFT: Dialogue + Controls -->
                    <div class="interview-left">
                        <!-- Dialogue -->
                        <div class="dialogue-container" id="dialogue-container">
                            <div class="pause-overlay" id="pause-overlay">
                                <div class="pause-overlay-icon">‚è∏</div>
                                <div class="pause-overlay-text">–ù–∞ –ø–∞—É–∑–µ</div>
                                <div class="pause-overlay-hint">–ù–∞–∂–º–∏—Ç–µ ‚ñ∂ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</div>
                            </div>
                            <!-- Messages will be added here -->
                        </div>

                        <!-- Controls -->
                        <div class="controls">
                            <div class="voice-indicator" id="voice-indicator">
                                <div class="wave">
                                    <span></span><span></span><span></span><span></span><span></span>
                                </div>
                                <span class="status-text" id="voice-status">–ù–∞–∂–º–∏—Ç–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ</span>
                            </div>

                            <div class="buttons">
                                <button id="mic-btn" class="btn btn-mic">
                                    <span class="icon">üé§</span>
                                </button>
                                <button id="pause-btn" class="btn btn-pause" disabled>
                                    <span class="icon">‚è∏</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT: Anketa Panel -->
                    <div class="interview-right">
                        <div class="anketa-panel" id="anketa-panel">
                            <!-- Anketa Header -->
                            <div class="anketa-header">
                                <h3>–ê–Ω–∫–µ—Ç–∞</h3>
                                <button id="copy-link-btn" class="btn btn-copy-link" type="button">
                                    –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
                                </button>
                            </div>

                            <!-- Document Upload -->
                            <div class="document-upload" id="document-upload">
                                <input type="file" id="doc-upload-input" multiple
                                       accept=".pdf,.docx,.xlsx,.xls,.txt,.md" hidden>
                                <button id="doc-upload-btn" class="btn btn-upload" type="button">
                                    –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
                                </button>
                                <div id="doc-upload-status" class="upload-status"></div>
                            </div>

                            <!-- Anketa Form (v2.0 ‚Äî full schema) -->
                            <form id="anketa-form" class="anketa-form" autocomplete="off">
                                <!-- Section 1: Contacts -->
                                <div class="anketa-section">
                                    <div class="anketa-section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                                    <div class="anketa-field">
                                        <label for="anketa-company_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                                        <input type="text" id="anketa-company_name" data-field="company_name" placeholder="–û–û–û –ü—Ä–∏–º–µ—Ä">
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-contact_name">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                                        <input type="text" id="anketa-contact_name" data-field="contact_name" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-contact_role">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                                        <input type="text" id="anketa-contact_role" data-field="contact_role" placeholder="–î–∏—Ä–µ–∫—Ç–æ—Ä">
                                    </div>
                                    <div class="anketa-field-row">
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                            <input type="text" id="anketa-phone" data-field="phone" placeholder="+7 999 123-45-67">
                                        </div>
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-email">Email</label>
                                            <input type="text" id="anketa-email" data-field="email" placeholder="info@company.ru">
                                        </div>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-website">–°–∞–π—Ç</label>
                                        <input type="text" id="anketa-website" data-field="website" placeholder="https://company.ru">
                                    </div>
                                </div>

                                <!-- Section 2: Business -->
                                <div class="anketa-section">
                                    <div class="anketa-section-title">–û –±–∏–∑–Ω–µ—Å–µ</div>
                                    <div class="anketa-field-row">
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-industry">–û—Ç—Ä–∞—Å–ª—å</label>
                                            <input type="text" id="anketa-industry" data-field="industry" placeholder="–ú–µ–¥–∏—Ü–∏–Ω–∞, –ª–æ–≥–∏—Å—Ç–∏–∫–∞...">
                                        </div>
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-specialization">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</label>
                                            <input type="text" id="anketa-specialization" data-field="specialization" placeholder="–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è...">
                                        </div>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-business_type">–¢–∏–ø –±–∏–∑–Ω–µ—Å–∞</label>
                                        <input type="text" id="anketa-business_type" data-field="business_type" placeholder="B2B, B2C, B2B2C">
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-company_description">–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                                        <textarea id="anketa-company_description" data-field="company_description" rows="2" placeholder="–ß–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∫–æ–º–ø–∞–Ω–∏—è..."></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-services">–£—Å–ª—É–≥–∏ / –ø—Ä–æ–¥—É–∫—Ç—ã <span class="field-hint">(–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-services" data-field="services" data-array="true" rows="2" placeholder="–£—Å–ª—É–≥–∞ 1&#10;–£—Å–ª—É–≥–∞ 2"></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-client_types">–¢–∏–ø—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ <span class="field-hint">(–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-client_types" data-field="client_types" data-array="true" rows="2" placeholder="–§–∏–∑. –ª–∏—Ü–∞&#10;–Æ—Ä. –ª–∏—Ü–∞"></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-current_problems">–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã <span class="field-hint">(–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-current_problems" data-field="current_problems" data-array="true" rows="2" placeholder="–ü—Ä–æ–±–ª–µ–º–∞ 1&#10;–ü—Ä–æ–±–ª–µ–º–∞ 2"></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-business_goals">–¶–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ <span class="field-hint">(–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-business_goals" data-field="business_goals" data-array="true" rows="2" placeholder="–°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É&#10;–£—Å–∫–æ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É"></textarea>
                                    </div>
                                </div>

                                <!-- Section 3: Voice Agent -->
                                <div class="anketa-section">
                                    <div class="anketa-section-title">–ì–æ–ª–æ—Å–æ–≤–æ–π –∞–≥–µ–Ω—Ç</div>
                                    <div class="anketa-field-row">
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-agent_name">–ò–º—è –∞–≥–µ–Ω—Ç–∞</label>
                                            <input type="text" id="anketa-agent_name" data-field="agent_name" placeholder="–ê–ª–∏—Å–∞, –ú–∞–∫—Å...">
                                        </div>
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-call_direction">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                                            <input type="text" id="anketa-call_direction" data-field="call_direction" placeholder="inbound / outbound">
                                        </div>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-agent_purpose">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞</label>
                                        <textarea id="anketa-agent_purpose" data-field="agent_purpose" rows="2" placeholder="–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤, –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º..."></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-agent_tasks">–ó–∞–¥–∞—á–∏ –∞–≥–µ–Ω—Ç–∞ <span class="field-hint">(–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-agent_tasks" data-field="agent_tasks" data-array="true" rows="2" placeholder="–ü—Ä–∏—ë–º –∑–≤–æ–Ω–∫–æ–≤&#10;–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º"></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-integrations">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ <span class="field-hint">(–∫–∞–∂–¥–∞—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-integrations" data-field="integrations" data-array="true" rows="2" placeholder="CRM&#10;1–°&#10;–¢–µ–ª–µ—Ñ–æ–Ω–∏—è"></textarea>
                                    </div>
                                    <div class="anketa-field-row">
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-voice_gender">–ü–æ–ª –≥–æ–ª–æ—Å–∞</label>
                                            <input type="text" id="anketa-voice_gender" data-field="voice_gender" placeholder="female / male">
                                        </div>
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-voice_tone">–¢–æ–Ω</label>
                                            <input type="text" id="anketa-voice_tone" data-field="voice_tone" placeholder="professional">
                                        </div>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-transfer_conditions">–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ <span class="field-hint">(–∫–∞–∂–¥–æ–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-transfer_conditions" data-field="transfer_conditions" data-array="true" rows="2" placeholder="–ñ–∞–ª–æ–±–∞&#10;–ó–∞–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞"></textarea>
                                    </div>
                                </div>

                                <!-- Section 4: Additional -->
                                <div class="anketa-section">
                                    <div class="anketa-section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</div>
                                    <div class="anketa-field">
                                        <label for="anketa-constraints">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è <span class="field-hint">(–∫–∞–∂–¥–æ–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-constraints" data-field="constraints" data-array="true" rows="2" placeholder="–ë—é–¥–∂–µ—Ç&#10;–°—Ä–æ–∫–∏"></textarea>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-compliance_requirements">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ <span class="field-hint">(–∫–∞–∂–¥–æ–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</span></label>
                                        <textarea id="anketa-compliance_requirements" data-field="compliance_requirements" data-array="true" rows="2" placeholder="152-–§–ó&#10;GDPR"></textarea>
                                    </div>
                                    <div class="anketa-field-row">
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-call_volume">–û–±—ä—ë–º –∑–≤–æ–Ω–∫–æ–≤</label>
                                            <input type="text" id="anketa-call_volume" data-field="call_volume" placeholder="~100/–¥–µ–Ω—å">
                                        </div>
                                        <div class="anketa-field anketa-field-half">
                                            <label for="anketa-budget">–ë—é–¥–∂–µ—Ç</label>
                                            <input type="text" id="anketa-budget" data-field="budget" placeholder="50 000 —Ä—É–±/–º–µ—Å">
                                        </div>
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-timeline">–°—Ä–æ–∫–∏</label>
                                        <input type="text" id="anketa-timeline" data-field="timeline" placeholder="1-2 –º–µ—Å—è—Ü–∞">
                                    </div>
                                    <div class="anketa-field">
                                        <label for="anketa-additional_notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                                        <textarea id="anketa-additional_notes" data-field="additional_notes" rows="2" placeholder="–õ—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                                    </div>
                                </div>

                                <!-- Section 5: AI Expert Analysis (read-only, shown when populated) -->
                                <div class="anketa-section" id="ai-blocks-section" style="display:none">
                                    <div class="anketa-section-title">AI-—ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞</div>
                                    <div class="ai-blocks-summary" id="ai-blocks-summary"></div>
                                </div>
                            </form>

                            <!-- Anketa Actions -->
                            <div class="anketa-actions">
                                <button id="confirm-anketa-btn" class="btn btn-confirm" type="button">
                                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–Ω–∫–µ—Ç—É
                                </button>
                                <button id="save-leave-btn" class="btn btn-save-leave" type="button">
                                    –ó–∞–≤–µ—Ä—à–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== SESSION REVIEW SCREEN ========== -->
            <div id="review-screen" class="screen">
                <div class="session-header">
                    <button id="review-back-btn" class="btn-back" type="button">‚Üê –ù–∞–∑–∞–¥</button>
                    <div class="session-meta">
                        <span class="session-company" id="review-company">‚Äî</span>
                        <span class="anketa-status-badge" id="review-status-badge">‚Äî</span>
                    </div>
                    <div class="session-meta-right">
                        <span class="review-duration" id="review-duration"></span>
                    </div>
                </div>

                <div class="review-columns">
                    <!-- LEFT: Anketa read-only -->
                    <div class="review-left">
                        <div class="review-panel">
                            <h3>–ê–Ω–∫–µ—Ç–∞</h3>
                            <div id="review-anketa-content" class="review-anketa-content">
                                <!-- Rendered by JS -->
                            </div>
                        </div>
                    </div>
                    <!-- RIGHT: Dialogue history -->
                    <div class="review-right">
                        <div class="review-panel">
                            <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞</h3>
                            <div id="review-dialogue" class="review-dialogue">
                                <!-- Rendered by JS -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="review-actions">
                    <button id="review-resume-btn" class="btn btn-primary" type="button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–µ—Å—Å–∏—é</button>
                    <button id="review-copy-link-btn" class="btn btn-copy-link" type="button">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>
            </div>

        </main>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container"></div>

        <!-- Footer -->
        <footer class="footer">
            <p>Hanc.AI &copy; 2026</p>
        </footer>
    </div>

    <script src="/app.js?v=4.7"></script>
</body>
</html>
